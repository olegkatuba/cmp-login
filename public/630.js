(self.webpackChunkcmp_browser_login=self.webpackChunkcmp_browser_login||[]).push([[630],{4630:function(e,t,s){"use strict";s.r(t),s(4747),s(2222),s(1249),s(9826);var i=s(6516),n=s(5260),o=function(){function e(e,t){this.locationInstance=i.n.getInstance(),this.botInstance=i.B.getInstance(),this.previousStorage=null,this.selectedVendorsIncludeNonDisclosed=!1,this.cmpApi={},this.tcModel=null,this.tcfData=null,this.vendors=[];var s=e.tcf2,o=s.changedPurposes,r=s.cmpId,c=s.cmpVersion,a=s.consensuScriptPath,d=s.disabledSpecialFeatures,l=s.gdprApplies,u=s.hideLegitimateInterestToggles,h=s.publisherCountryCode,p=s.purposeOneTreatment,v=s.scope,g=s.selectedStacks,f=s.selectedVendorIds,I=s.tcfv2HistoryDisabled;this.changedPurposes=(0,n.q)(o),this.cmpId=r||5,this.cmpVersion=c||(0,i.o)(),this.consensuScriptPath=(0,n.s)(a),this.consensuSubdomain=(0,n.t)(e.tcf2.consensuDomain),this.disabledSpecialFeatures=d||[],this.gdprApplies=l||!1,this.hideLegitimateInterestToggles=u,this.isServiceSpecific=v===i.p.SERVICE,this.publisherCountryCode=h||"DE",this.purposeOneTreatment=p||!1,this.resurfaceOptions=(0,n.u)(e.tcf2),this.stackIds=g||[],this.tcfv2HistoryDisabled=I,this.useGranularChoice=(0,n.v)(e.tcf2.firstLayerHideToggles,e.tcf2.secondLayerHideToggles),this.vendorIds=f||[],this.selectedLanguage=(0,n.r)(e.language),this.cmpApi=new n.w.CmpApi(this.cmpId,this.cmpVersion,this.isServiceSpecific),this.dataTransferSettings=t}return e.prototype.updateControllerId=function(e){this.dataTransferSettings.controllerId=e},e.prototype.acceptAllDisclosed=function(e){var t,s;return(0,i.f)(this,void 0,void 0,(function(){var o,r,c;return(0,i.g)(this,(function(a){switch(a.label){case 0:return(o=this.tcModel)?(r=[],c=[],this.getVendors().forEach((function(e){var t=e.id,s=e.legitimateInterestPurposes,i=e.purposes;i.length?(o.vendorConsents.set(t),r=r.concat(i.map((function(e){return e.id})))):o.vendorConsents.unset(t),s.length?(o.vendorLegitimateInterests.set(t),c=c.concat(s.map((function(e){return e.id})))):o.vendorLegitimateInterests.unset(t)})),o.purposeConsents.set((0,i.u)(r)),o.purposeLegitimateInterests.set((0,i.u)(c)),this.hideLegitimateInterestToggles&&(o.unsetAllVendorLegitimateInterests(),o.unsetAllPurposeLegitimateInterests()),o.specialFeatureOptins.set((0,n.g)(null===(s=null===(t=this.tcModel)||void 0===t?void 0:t.gvl)||void 0===s?void 0:s.stacks,this.getVendors(),this.disabledSpecialFeatures,this.stackIds)),this.tcModel=o,[4,this.updateTCString(e)]):[2];case 1:return a.sent(),[2]}}))}))},e.prototype.areAllPurposesAccepted=function(){var e,t;return(0,n.a)(this.tcModel,null===(e=this.tcModel)||void 0===e?void 0:e.gvl.stacks,null===(t=this.tcModel)||void 0===t?void 0:t.gvl.purposes,this.vendors,this.disabledSpecialFeatures,this.stackIds,this.purposeOneTreatment,this.useGranularChoice,this.hideLegitimateInterestToggles).every((function(e){var t=!0,s=!0;return e.showConsentToggle&&null!==e.consent&&(t=e.consent),e.showLegitimateInterestToggle&&null!==e.legitimateInterestConsent&&(s=e.legitimateInterestConsent),t&&s}))},e.prototype.areAllVendorsAccepted=function(){var e,t=(0,n.b)(this.vendorIds,null===(e=this.tcModel)||void 0===e?void 0:e.gvl.vendors),s=this.getVendors();return t.every((function(e){var t=s.find((function(t){return t.id===e})),i=!0,n=!0;return!!t&&(t.showConsentToggle&&null!==t.consent&&(i=t.consent),t.showLegitimateInterestConsentToggle&&null!==t.legitimateInterestConsent&&(n=t.legitimateInterestConsent),i&&n)}))},e.prototype.changeLanguage=function(e){return(0,i.f)(this,void 0,void 0,(function(){var t;return(0,i.g)(this,(function(s){switch(s.label){case 0:return t=(0,n.r)(e),[4,this.resetGVLWithLanguage("en"===t?t+"-v2":t)];case 1:return s.sent(),this.tcModel&&this.tcModel.gvl.narrowVendorsTo((0,n.b)(this.vendorIds,this.tcModel.gvl.vendors)),this.resetTcfData(),[2]}}))}))},e.prototype.denyAllDisclosed=function(e){return(0,i.f)(this,void 0,void 0,(function(){var t;return(0,i.g)(this,(function(s){switch(s.label){case 0:return this.tcModel?(this.tcModel.unsetAllVendorConsents(),this.tcModel.unsetAllVendorLegitimateInterests(),t=(0,n.c)(this.tcModel.gvl.stacks,this.getVendors(),this.disabledSpecialFeatures,this.stackIds,this.purposeOneTreatment),this.tcModel.purposeConsents.unset(t),this.tcModel.purposeLegitimateInterests.unset(t),this.tcModel.specialFeatureOptins.unset((0,n.g)(this.tcModel.gvl.stacks,this.getVendors(),this.disabledSpecialFeatures,this.stackIds)),[4,this.updateTCString(e)]):[2];case 1:return s.sent(),[2]}}))}))},e.prototype.getSelectedVendorsIncludeNonDisclosed=function(){return this.selectedVendorsIncludeNonDisclosed},e.prototype.getTCFData=function(){var e,t,s,i,o,r,c,a,d;return this.tcfData||(this.tcfData={features:(0,n.d)(this.getVendors(),null===(t=null===(e=this.tcModel)||void 0===e?void 0:e.gvl)||void 0===t?void 0:t.features),purposes:(0,n.a)(this.tcModel,null===(s=this.tcModel)||void 0===s?void 0:s.gvl.stacks,null===(i=this.tcModel)||void 0===i?void 0:i.gvl.purposes,this.getVendors(),this.disabledSpecialFeatures,this.stackIds,this.purposeOneTreatment,this.useGranularChoice,this.hideLegitimateInterestToggles),specialFeatures:(0,n.e)(this.tcModel,null===(o=this.tcModel)||void 0===o?void 0:o.gvl,this.getVendors(),this.disabledSpecialFeatures,this.stackIds,this.useGranularChoice),specialPurposes:(0,n.f)(null===(c=null===(r=this.tcModel)||void 0===r?void 0:r.gvl)||void 0===c?void 0:c.specialPurposes,this.getVendors()),stacks:(0,n.h)(null===(d=null===(a=this.tcModel)||void 0===a?void 0:a.gvl)||void 0===d?void 0:d.stacks,this.disabledSpecialFeatures,this.stackIds),vendors:this.getVendors()}),this.tcfData},e.prototype.getGdprApplies=function(){return(0,i.f)(this,void 0,void 0,(function(){return(0,i.g)(this,(function(e){switch(e.label){case 0:return this.gdprApplies?[4,this.locationInstance.getIsUserInEU()]:[2,!0];case 1:return[2,e.sent()]}}))}))},e.prototype.getTCString=function(){return this.tcModel?n.l.TCString.encode(this.tcModel):""},e.prototype.init=function(){return(0,i.f)(this,void 0,void 0,(function(){var e,t=this;return(0,i.g)(this,(function(s){switch(s.label){case 0:return this.previousStorage=i.S.fetchTCFData(),e="",this.isServiceSpecific?[3,3]:[4,i.C.init(i.I.COOKIE_BRIDGE,{cookieBridgeScriptPath:this.consensuScriptPath,cookieBridgeSubdomain:this.consensuSubdomain,useEuCdn:!1}).then((function(){i.C.setIsCookieBridgeAvailable(!0)})).catch((function(){console.warn(i.T.COOKIE_BRIDGE_NOT_AVAILABLE),i.C.removeIFrame(i.h)}))];case 1:return s.sent(),[4,i.C.getGlobalTCString().catch((function(){return console.warn(i.T.GET_GLOBAL_TC_STRING_FAILURE),t.isServiceSpecific=!0,""}))];case 2:e=s.sent(),s.label=3;case 3:return e||(e=i.S.fetchTCString()||""),[4,this.initTCModel(e,!1)];case 4:return s.sent(),this.botInstance.isRobot()&&this.acceptAllDisclosed(1),[2]}}))}))},e.prototype.setUIAsClosed=function(){return(0,i.f)(this,void 0,void 0,(function(){return(0,i.g)(this,(function(e){return[2,this.cmpApiUpdate(i.S.fetchTCString(),!1)]}))}))},e.prototype.setUIAsOpen=function(){return(0,i.f)(this,void 0,void 0,(function(){return(0,i.g)(this,(function(e){return[2,this.cmpApiUpdate(i.S.fetchTCString(),!0)]}))}))},e.prototype.shouldResurfaceUI=function(){var e=this.resurfaceOptions;return e.onIABLegalBasisChanged&&(0,n.i)(this.previousStorage,this.tcModel)||e.onVendorAdded&&(0,n.j)(this.previousStorage,this.getVendors())||e.onPurposeChanged&&(0,n.k)(this.previousStorage,this.getVendors())||e.onPeriodEnded&&(0,n.m)(this.previousStorage)},e.prototype.updateChoices=function(e,t){return(0,i.f)(this,void 0,void 0,(function(){return(0,i.g)(this,(function(s){switch(s.label){case 0:return e.purposes?[4,this.savePurposes(e.purposes)]:[3,2];case 1:s.sent(),s.label=2;case 2:return e.specialFeatures?[4,this.saveSpecialFeatures(e.specialFeatures)]:[3,4];case 3:s.sent(),s.label=4;case 4:return e.vendors?[4,this.saveVendors(e.vendors)]:[3,6];case 5:s.sent(),s.label=6;case 6:return this.tcModel&&this.hideLegitimateInterestToggles&&(this.tcModel.unsetAllVendorLegitimateInterests(),this.tcModel.unsetAllPurposeLegitimateInterests()),e.purposes||e.specialFeatures||e.vendors?[4,this.updateTCString(t)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[2]}}))}))},e.prototype.resetTcf=function(){this.cmpApi={},this.selectedVendorsIncludeNonDisclosed=!1,this.tcModel={},this.tcfData=null,this.vendors=[],i.C.removeIFrame(i.h)},e.prototype.applyVendorPurposeRestrictions=function(e,t,s){var o=this,r=s===i.i.PURPOSES?i.i.LEGITIMATE_INTEREST:i.i.PURPOSES,c=s===i.i.PURPOSES?n.l.RestrictionType.REQUIRE_CONSENT:n.l.RestrictionType.REQUIRE_LI;t.forEach((function(t){var i;if(-1!==e.flexiblePurposes.indexOf(t)&&-1!==e[r].indexOf(t)&&-1===e[s].indexOf(t)){var a=new n.l.PurposeRestriction(t,c);!1===(null===(i=o.tcModel)||void 0===i?void 0:i.publisherRestrictions.vendorHasRestriction(e.id,a))&&o.tcModel.publisherRestrictions.add(e.id,a)}}))},e.prototype.cmpApiUpdate=function(e,t){return(0,i.f)(this,void 0,void 0,(function(){return(0,i.g)(this,(function(s){switch(s.label){case 0:return[4,this.getGdprApplies()];case 1:return s.sent()?this.cmpApi.update(e,t):this.cmpApi.update(null),[2]}}))}))},e.prototype.getVendors=function(){return(0,i.j)(this.vendors)||this.setVendors(),this.vendors},e.prototype.initTCModel=function(e,t){return(0,i.f)(this,void 0,void 0,(function(){var s,o,r=this;return(0,i.g)(this,(function(c){switch(c.label){case 0:if(n.l.GVL.baseUrl=t?i.G:i.k,n.l.GVL.languageFilename=i.l,n.l.GVL.latestFilename=i.m,s=new n.l.GVL,this.tcModel=new n.l.TCModel(s),this.tcModel.cmpId=this.cmpId,this.tcModel.cmpVersion=this.cmpVersion,this.tcModel.isServiceSpecific=this.isServiceSpecific,this.tcModel.publisherCountryCode=this.publisherCountryCode,this.tcModel.purposeOneTreatment=this.purposeOneTreatment,e)try{this.tcModel=n.l.TCString.decode(e,this.tcModel)}catch(e){console.warn(i.T.INIT_TCF_ERROR,e.message)}if(null===(o=this.tcModel))throw new Error(i.T.TC_MODEL_UNDEFINED);if(!this.selectedLanguage)throw new Error(i.T.SELECTED_LANGUAGE_UNDEFINED);return[4,o.gvl.readyPromise.then((function(){return(0,i.f)(r,void 0,void 0,(function(){var e,t,s,r,c,a=this;return(0,i.g)(this,(function(d){switch(d.label){case 0:return e=(0,n.b)(this.vendorIds,o.gvl.vendors),this.isServiceSpecific&&(t=this.changedPurposes,s=t.purposes,r=t.legitimateInterestPurposes,e.forEach((function(e){var t=o.gvl.vendors[e];t&&(a.applyVendorPurposeRestrictions(t,s,i.i.PURPOSES),a.applyVendorPurposeRestrictions(t,r,i.i.LEGITIMATE_INTEREST))}))),c=(0,n.r)(this.selectedLanguage),[4,this.resetGVLWithLanguage("en"===c?c+"-v2":c)];case 1:return d.sent(),this.tcModel&&this.tcModel.gvl.narrowVendorsTo(e),this.setSelectedVendorsIncludeNonDisclosed(e),!this.isServiceSpecific&&this.tcModel&&this.tcModel.vendorsDisclosed.set(e),[2]}}))}))}))];case 1:return c.sent(),[2]}}))}))},e.prototype.resetGVLWithLanguage=function(e){var t,s;return(0,i.f)(this,void 0,void 0,(function(){var o;return(0,i.g)(this,(function(r){return o=(0,n.r)(e),[2,null===(s=null===(t=this.tcModel)||void 0===t?void 0:t.gvl)||void 0===s?void 0:s.changeLanguage(o).catch((function(e){console.warn(i.T.RESET_GVL_FAILURE,e)}))]}))}))},e.prototype.resetTcfData=function(){this.vendors=[],this.tcfData=null},e.prototype.setSelectedVendorsIncludeNonDisclosed=function(e){var t=this,s=i.S.fetchTCFVendorsDisclosedObject();e.some((function(e){var i;return t.isServiceSpecific?!(0,n.n)(e,s):!(null===(i=t.tcModel)||void 0===i?void 0:i.vendorsDisclosed.has(e))}))&&(this.selectedVendorsIncludeNonDisclosed=!0)},e.prototype.savePurposes=function(e){return(0,i.f)(this,void 0,void 0,(function(){var t;return(0,i.g)(this,(function(s){return(t=this.tcModel)?(e.forEach((function(e){e.consent?t.purposeConsents.set(e.id):t.purposeConsents.unset(e.id),e.legitimateInterestConsent?t.purposeLegitimateInterests.set(e.id):t.purposeLegitimateInterests.unset(e.id)})),[2]):[2]}))}))},e.prototype.saveSpecialFeatures=function(e){return(0,i.f)(this,void 0,void 0,(function(){var t;return(0,i.g)(this,(function(s){return(t=this.tcModel)?(e.forEach((function(e){e.consent?t.specialFeatureOptins.set(e.id):t.specialFeatureOptins.unset(e.id)})),[2]):[2]}))}))},e.prototype.saveVendors=function(e){return(0,i.f)(this,void 0,void 0,(function(){var t;return(0,i.g)(this,(function(s){return(t=this.tcModel)?(e.forEach((function(e){e.consent?t.vendorConsents.set(e.id):t.vendorConsents.unset(e.id),e.legitimateInterestConsent?t.vendorLegitimateInterests.set(e.id):t.vendorLegitimateInterests.unset(e.id)})),[2]):[2]}))}))},e.prototype.setVendors=function(){var e;this.vendors=(0,n.o)(this.tcModel,null===(e=this.tcModel)||void 0===e?void 0:e.gvl,this.disabledSpecialFeatures,this.useGranularChoice,this.hideLegitimateInterestToggles,this.purposeOneTreatment)},e.prototype.updateTCString=function(e){return(0,i.f)(this,void 0,void 0,(function(){var t,s;return(0,i.g)(this,(function(o){switch(o.label){case 0:return this.tcModel&&(this.tcModel.consentScreen=e,this.tcModel.updated()),t=this.getTCString(),this.isServiceSpecific?[3,2]:[4,i.C.setGlobalTCString(t).catch((function(){console.warn(i.T.SET_GLOBAL_TC_STRING_FAILURE)}))];case 1:o.sent(),o.label=2;case 2:return s={tcString:t,timestamp:Date.now(),vendors:(0,n.p)(this.getVendors())},i.S.saveTCFData(s),[4,this.cmpApiUpdate(t,!1)];case 3:return o.sent(),this.resetTcfData(),this.botInstance.isRobot()?[3,5]:[4,i.A.getInstance().saveTCFConsents(this.dataTransferSettings,s,"onTcfStringChange","implicit")];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))},e}();t.default=o}}]);