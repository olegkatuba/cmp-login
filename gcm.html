<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Usercentrics CMP preview</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1" />
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" />
    <meta name="description" content="This is the usercentrics consent management platform preview." />
    <link rel="dns-prefetch" href="//app.usercentrics.eu" />
    <link rel="dns-prefetch" href="//api.usercentrics.eu" />
    <link rel="dns-prefetch" href="//aggregator.service.usercentrics.eu" />
    <link rel="preconnect" href="https://app.usercentrics.eu" />
    <link rel="preconnect" href="https://api.usercentrics.eu" />
    <link rel="preconnect" href="https://aggregator.service.usercentrics.eu" />

    <script type="text/javascript">
      // create dataLayer
      window.dataLayer = window.dataLayer || [];
      function gtag() {
          dataLayer.push(arguments);
      }
  
      // set „denied" as default for both ad and analytics storage,
      gtag("consent", "default", {
          ad_storage: "denied",
          analytics_storage: "denied",
          wait_for_update: 2000 // milliseconds to wait for update
      });
  
      // Enable ads data redaction by default [optional]
      gtag("set", "ads_data_redaction", true);
    </script>

    <!-- Google Tag Manager -->
    <script type="text/javascript">
      (function(w, d, s, l, i) {
          w[l] = w[l] || [];
          w[l].push({
              'gtm.start': new Date().getTime(),
              event: 'gtm.js'
          });
          var f = d.getElementsByTagName(s)[0],
              j = d.createElement(s),
              dl = l != 'dataLayer' ? '&l=' + l : '';
          j.async = true;
          j.src =
              'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
          f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-KV9RSGP'); //replace GTM-XXXXXX with Google Tag Manager ID
    </script>
    <!-- End Google Tag Manager -->

    <!-- Instead of adding the usercentrics script as usual, we build the script dynamically based on the URL-parameter.
   This way we are able to open the page with different settingsIds and controllerIds -->
    <script type="text/javascript">
      // URLSearchParams polyfill for IE11
      (function (w) {
        w.URLSearchParams =
          w.URLSearchParams ||
          function (searchString) {
            var thisContext = this;
            thisContext.searchString = searchString;
            thisContext.get = function (name) {
              var results = new RegExp('[?&]' + name + '=([^&#]*)').exec(thisContext.searchString);

              if (results == null) {
                return null;
              }

              return decodeURI(results[1]) || 0;
            };
          };
      })(window);

      var initBundleSuccess = false;

      function initBundle() {
        if (!initBundleSuccess && document.readyState !== 'loading') {
          initBundleSuccess = true;

          var urlParams = new URLSearchParams(window.location.search);
          var settingsId = urlParams.get('settings-id');
          var controllerId = urlParams.get('controller-id');
          var language = urlParams.get('language');
          var loadLegacyVersion = urlParams.get('legacy') !== null;
          var loadModuleVersion = urlParams.get('module') !== null;
          var isTcfEnabled = urlParams.get('tcf') !== null;
          var countryCode = urlParams.get('countryCode');
          var regionCode = urlParams.get('regionCode');
          var euMode = urlParams.get('euMode');
          var blockDataLayerPush = urlParams.get('block-data-layer-push');
          var embeddings = urlParams.get('embeddings');
          var loader = urlParams.get('loader');

          if (loadLegacyVersion) {
            document.getElementsByTagName('body')[0].classList.add('legacy');
          }

          if (!settingsId) {
            if (
              location.href.indexOf('/usercentrics-integration-test-browser-ui/develop/') !== -1 ||
              location.href.indexOf('/usercentrics-integration-test-browser-ui/integration/') !== -1
            ) {
              settingsId = 'u4_zoWyvU'; // sandbox settings id
            } else {
              settingsId = 'GVl-ixMH'; // Browser UI TCF2 settings id
              isTcfEnabled = true; // tcf is enabled
            }
          }

          var script = document.createElement('script');
          script.id = 'usercentrics-cmp';
          script.src = loader
            ? './loader.js'
            : loadLegacyVersion
            ? './bundle_legacy.js'
            : loadModuleVersion
            ? './index.module.js'
            : './bundle.js';
          script.async = true;

          if (loadModuleVersion) {
            script.type = 'module';
          }

          script.setAttribute('data-settings-id', settingsId);

          if (isTcfEnabled) {
            script.setAttribute('data-tcf-enabled', '');
          }
          if (controllerId) {
            script.setAttribute('data-controller-id', controllerId);
          }
          if (language) {
            script.setAttribute('data-language', language);
          }
          if (countryCode) {
            window.UC_UI_USER_COUNTRY_DATA = {
              code: countryCode.substr(0, 2).toUpperCase(),
              name: 'Custom Country',
              regionCode: regionCode ? regionCode.substr(0, 2).toUpperCase() : '',
            };
          }
          if (euMode) {
            script.setAttribute('data-eu-mode', '');
          }

          if (blockDataLayerPush) {
            script.setAttribute('data-block-data-layer-push', '');
          }

          if (embeddings) {
            var root = document.createElement('div');
            var h1 = document.createElement('h1');
            h1.innerText = 'Embeddings';
            root.appendChild(h1);

            var h2 = document.createElement('h2');
            h2.innerText = 'class="uc-embed"';
            root.appendChild(h2);

            var ucEmbed = document.createElement('div');
            ucEmbed.setAttribute('class', 'uc-embed');
            root.appendChild(ucEmbed);

            var h3Vendor = document.createElement('h3');
            h3Vendor.innerText = 'With UC Style & Custom Headlines';
            root.appendChild(h3Vendor);

            var h4Vendor = document.createElement('h4');
            h4Vendor.innerText = 'uc-embedding-type="vendor":';
            root.appendChild(h4Vendor);

            var ucEmbedTcfVendor = document.createElement('div');
            ucEmbedTcfVendor.setAttribute('class', 'uc-embed-tcf');
            ucEmbedTcfVendor.setAttribute('uc-embedding-type', 'vendor');
            ucEmbedTcfVendor.setAttribute('uc-embedding-title', 'Custom-Headline');
            ucEmbedTcfVendor.setAttribute('uc-embedding-vendors', 'Custom-IAB_V-Headline');
            ucEmbedTcfVendor.setAttribute('uc-embedding-non-iab-vendors', 'Custom-NON_IAB_V-Headline');
            ucEmbedTcfVendor.setAttribute('uc-styling', 'true');
            root.appendChild(ucEmbedTcfVendor);

            var h4Purpose = document.createElement('h4');
            h4Purpose.innerText = 'uc-embedding-type="purpose":';
            root.appendChild(h4Purpose);

            var ucEmbedTcfPurpose = document.createElement('div');
            ucEmbedTcfPurpose.setAttribute('class', 'uc-embed-tcf');
            ucEmbedTcfPurpose.setAttribute('uc-embedding-type', 'purpose');
            ucEmbedTcfPurpose.setAttribute('uc-embedding-title', 'Custom-Headline');
            ucEmbedTcfPurpose.setAttribute('uc-embedding-vendors', 'Custom-IAB_P-Headline');
            ucEmbedTcfPurpose.setAttribute('uc-embedding-non-iab-vendors', 'Custom-NON_IAB_P-Headline');
            ucEmbedTcfPurpose.setAttribute('uc-styling', 'true');
            ucEmbedTcfPurpose.style = 'margin-top: 40px;';
            root.appendChild(ucEmbedTcfPurpose);

            var h3VendorDefault = document.createElement('h3');
            h3VendorDefault.innerText = 'No UC Style & Default Values';
            root.appendChild(h3VendorDefault);
            root.appendChild(h4Vendor);

            var ucEmbedTcfVendorNoStyle = document.createElement('div');
            ucEmbedTcfPurpose.setAttribute('class', 'uc-embed-tcf');
            ucEmbedTcfPurpose.setAttribute('uc-embedding-type', 'vendor');
            ucEmbedTcfPurpose.setAttribute('uc-styling', 'false');
            ucEmbedTcfPurpose.style = 'padding: 30px; background-color: bisque; margin-top: 40px;';
            root.appendChild(ucEmbedTcfVendorNoStyle);

            root.appendChild(h4Purpose);

            var ucEmbedTcfPurposeNoStyle = document.createElement('div');
            ucEmbedTcfPurposeNoStyle.setAttribute('class', 'uc-embed-tcf');
            ucEmbedTcfPurposeNoStyle.setAttribute('uc-embedding-type', 'purpose');
            ucEmbedTcfPurposeNoStyle.setAttribute('uc-styling', 'false');
            ucEmbedTcfPurposeNoStyle.style = 'padding: 30px; background-color: rgb(196, 255, 219); margin-top: 40px;';
            root.appendChild(ucEmbedTcfPurposeNoStyle);

            document.body.appendChild(root);
          }

          script.setAttribute('data-settings-cache', Date.now().toString());
          document.head.appendChild(script);
        }
      }

      // Add the usercentrics script tag with the custom settingsId and controllerId to the document body
      (function () {
        if (document.readyState !== 'complete') {
          document.addEventListener('DOMContentLoaded', function () {
            initBundle();
          });
        } else {
          initBundle();
        }
      })();
    </script>
    <style type="text/css">
      body {
        background-color: #f0f0f2;
        margin: 0;
        padding: 0;
        font-family: -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', 'Open Sans', 'Helvetica Neue', Helvetica,
          Arial, sans-serif;
        word-break: break-word;
      }

      body.legacy {
        background-color: red;
      }

      .content {
        max-width: 800px;
        margin: 5em auto;
        padding: 2em;
        background-color: #fdfdff;
        border-radius: 0.5em;
        box-shadow: 2px 3px 7px 2px rgba(0, 0, 0, 0.02);
      }
    </style>
  </head>

  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KV9RSGP"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="content">
      <h1>Usercentrics CMP preview</h1>
      <h2>GDPR</h2>
      <p>
        Whether or not your website is GDPR-compliant can easily be determined by ANYONE with very little technical
        knowledge, making this one of the most vulnerable aspects of your business.
      </p>
      <p>
        Scan your website for free and check if your use of cookies and tracking technologies is compliant with the
        GDPR.
      </p>
      <h2>TCF</h2>
      <p>
        Numerous essential actors and technology providers in the AdTech landscape have already committed themselves to
        support this framework. First and foremost Google, but also Criteo, Xandr, Adition, Quantcast, Taboola,
        MediaMath, etc.
      </p>
      <p>
        In other words: many vendors will no longer support advertising where no associated IAB Transparency & Consent
        String (TC String) can be queried via the website’s CMP. Without this TC String, the vendor cannot be sure that
        there is a legal basis for the display of advertising. This is a procedure that is likely to become increasingly
        prevalent among vendors.
      </p>
      <h2>CCPA</h2>
      <p>
        The California Consumer Privacy Act (CCPA) (in force since July 1, 2020) is a privacy law that applies to 40
        million California residents (even on vacation) and the hundreds of thousands of businesses that interact with
        them.
      </p>
      <p>
        The CCPA is therefore not solely aimed at businesses based in California. It affects any business that processes
        the personal information of consumers in California – if certain criteria are fulfilled.
      </p>
      <button onclick="javascript:UC_UI.showFirstLayer();">Show first layer</button>
      <button onclick="javascript:UC_UI.showSecondLayer();">Show second layer</button>
    </div>
  </body>
</html>
